# SQL Intro

## Content

- What is a database
- Writing SQL

## Why a Database?

- Our W3 project - TinyApp - was using an in-memory database and used objects as a data structure

- What was the issue with keeping our data in an in-memory database?


## What is a database

- Organized collection of persisted data
- Information being written to be used at a later time
- Third tier of the web development architecture (Client - Application - Data)

 - [3-Tier Architectured](./3tier.jpg)
 - [Reference](https://www.quora.com/What-is-the-role-of-a-web-service-in-a-three-tier-architecture)


### Database Management System (DBMS)

- Software designed to manage data in a database
- Manipulates the data, the data format, file structure. 
- Defines rules to validate and manipulate this data
- Uses a query language

Main DBMS

- Oracle
- MySQL (free software)
- Microsoft SQL Server
- IBM DB2
- PostgreSQL (free software)
- SQLite (free software)
- MariaDB (free software)


### Types of Databases

- Relational databases
  - MySQL, Postgresql, SQLite
- Key-value stores (like Javascript objects)
  - Redis
- Column stores
  - Cassandran
  - HBase
- Graph databases
- Document databases (JSON like format)
  - MongoDB
- Real-Time Database
  - Firebase

## Relational Databases

- Tables (data stored in rows and columns)
- There is a relationship between the tables

## SQL

> Structured Query Language

- Developed by IBM in the early 70s
- Initially called SEQUEL (Structured English Query Language)

- Declarative language (vs imperative)
- We state only what we need
- We do not worry about how to get it

### Data Definition Language (DDL)

- Creating a database (createdb name)
- Deleting a database (dropdb name)
- Creating, modifying, of deleteing tables

[Create Tables](./db/create_tables.sql)

### Data Manipulation Language (DML)

- INSERT
- UPDATE
- DELETE
- SELECT

[Seeds](./db/seeds.sql)

## Write SELECT statements

- We are going to use the games DB to make queries

- Tables have an id column marked as a PK, this is our "Primary Key"
- Primary keys are unique identifiers which identifies each row
- We are using an auto increment id generated by postgres
- The Foreign Key (FK) is going to contain the id value of the projects table 

### Create the database

At the terminal, write the following commands

- `createdb games`
- `psql games < db/create.sql`
- `psql games < db/seeds.sql`

- At the terminal, get into the projects database

`psql games`

### SELECT STATEMENT

Full Syntax of an SQL SELECT Query

```sql
SELECT column list, function(), function(), ...
FROM table1
INNER JOIN table2
...
ON table1.col1 = table2.col2
...
WHERE criteria for row selection
[AND criteria for row selection]
[OR criteria for row selection]
GROUP BY column list
HAVING criteria for function results
ORDER BY column list;
```
